/*! For license information please see 259.d406f2a6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmeasurement_client=self.webpackChunkmeasurement_client||[]).push([[259],{3259:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.RMBTTest=function(e,t){function n(e){void 0!==R&&R===e||(R=e,M=g(),D&&D(e))}function o(e,t,o){var r=(e.test_server_encryption?"wss://":"ws://")+e.test_server_address+":"+e.test_server_port;T.debug(r);var s={IGNORE:function(){},CALLGLOBALHANDLER:function(e){e&&T.error("connection closed",e),z(1006===e.code?f.ABNORMALLY_CLOSED:f.CONNECT_FAILED)},TRYRECONNECT:function(){z(f.CONNECT_FAILED)}};t.onStateEnter(i.INIT_DOWN,function(){n(i.INIT_DOWN),T.debug(t.id+": start short download"),b=I,p(t,O.pretestDurationMs)}),t.onStateEnter(i.PING,function(){n(i.PING),T.debug(t.id+": starting ping"),0===t.id?m(t):t.triggerNextState()}),t.onStateEnter(i.DOWN,function(){if(n(i.DOWN),j.length>0){var o=c(j,O.downloadThreadsLimitsMbit,!1);x=o.numThreads,S&&(b=o.chunkSize),j=[]}t.id<x?function(e,t){var n=e.socket.onmessage,o=0,r=0,s=-1,i=void 0,a=void 0,u=null,d=null;i=window.setInterval(function(){if(null!==u&&s!==r){s=r;var t=h();T.debug(e.id+": "+a+"|"+O.measurementPointsTimespan+"|"+t+"|"+r);var c=new Uint8Array(u,u.byteLength-1,1),p=d-l;e.result.down.push({duration:p,bytes:o}),a=t,c[0]>=255&&(T.debug(e.id+": received end chunk"),window.clearInterval(i),e.socket.onmessage=function(t){T.debug(t.data),e.socket.onmessage=n},e.socket.send("OK\n"))}},O.measurementPointsTimespan);var c=function(e){r++,o+=e.data.byteLength,d=h(),u=e.data};e.socket.onmessage=c;var l=h();e.socket.send("GETTIME "+t+(b!==N?" "+b:"")+"\n")}(t,e.test_duration):(t.socket.onerror=s.IGNORE,t.socket.onclose=s.IGNORE,t.triggerNextState())}),t.onStateEnter(i.CONNECT_UPLOAD,function(){n(i.INIT_UP),t.socket.onerror=s.IGNORE,t.socket.onclose=s.IGNORE,t.socket.close(),a(t,r,e.test_token,s.CALLGLOBALHANDLER)}),t.onStateEnter(i.INIT_UP,function(){b=I,function(e,t){var n=e.socket.onmessage,o=g(),r=1,s=b;window.setTimeout(function(){var e=g()-o;T.debug("diff:"+(e-t)+" ("+(e-t)/t+" %)")},t),function i(){!function(e,t,n,o){var r=e.socket;r.onmessage=function(e){0!==e.data.indexOf("OK")&&0!==e.data.indexOf("ACCEPT")&&o(e.data)},T.debug(e.id+": uploading "+t+" chunks, "+n*t/1e3+" KB"),r.send("PUTNORESULT"+(S?" "+n:"")+"\n");for(var s=0;s<t;s++){var i=void 0;i=s===t-1?B[n]:A[n][0],r.send(i)}}(e,r,s,function(a){if(T.debug(e.id+": "+a),g()-o>t){e.socket.onmessage=n;var u=parseInt(a.substring(5));j.push(r*s/(u/1e9))}else{var d=2*s;r<8||!B.hasOwnProperty(d)||!S?(r*=2,i()):(s=Math.min(2*s,w),i())}})}()}(t,O.pretestDurationMs)}),t.onStateEnter(i.UP,function(){if(n(i.UP),j.length>0){var o=c(j,O.uploadThreadsLimitsMbit,!0);K=o.numThreads,S&&(b=o.chunkSize),j=[]}t.id<K?function(e,t){var n=e.socket.onmessage,o=F/2/K,r=1.5*F/K,s=document.hidden?r:o,i=function(){s=document.hidden?r:o,T.debug("document visibility changed to: "+document.hidden)};document.addEventListener("visibilitychange",i);var a=Math.ceil(F/K/b),u=!1,d=!0,c=-1,l=0,p=function o(){u||(T.debug(e.id+": is 7.2 sec in, got data for "+c),c<1e9*t&&l<3e3?(window.setTimeout(o,250),l+=250):(T.debug(e.id+": didn't finish, timeout extended by "+l+" ms, last info for "+c),e.socket.onerror=function(){},e.socket.onclose=function(){},e.socket.close(),e.socket.onmessage=n,T.debug(e.id+": socket now closed: "+e.socket.readyState),document.removeEventListener("visibilitychange",i),e.triggerNextState()))},f=function t(){if(e.socket.bufferedAmount<s)for(var n=0;n<a;n++)e.socket.send(A[b][n%A[b].length]);if(!d)return!1;setTimeout(t,0)};window.setTimeout(p,1e3*t+200),window.setTimeout(function(){d=!1,e.socket.onclose=function(){},e.socket.send(B[b]),e.socket.send("QUIT\n")},1e3*t),T.debug(e.id+": set timeout");var g=1e6*O.measurementPointsTimespan,h=/TIME (\d+) BYTES (\d+)/,v=/TIME (\d+)/,m=function(t){"OK\n"===t.data&&f();var o=h.exec(t.data);if(null!==o){var r={duration:parseInt(o[1]),bytes:parseInt(o[2])};r.duration-c>g&&(c=r.duration,e.result.up.push(r))}else null!==(o=v.exec(t.data))&&(u=!0,T.debug("Upload duration: "+o[1]),e.socket.onmessage=n,document.removeEventListener("visibilitychange",i))};e.socket.onmessage=m,e.socket.send("PUT"+(b!==N?" "+b:"")+"\n")}(t,e.test_duration):(t.socket.onerror=s.IGNORE,t.socket.onclose=s.IGNORE,t.socket.readyState!==WebSocket.CLOSED&&t.socket.close(),t.triggerNextState())}),t.onStateEnter(i.END,function(){t.socket.readyState!==WebSocket.CLOSED&&t.socket.close(),0===t.id&&o()}),t.setState(i.INIT),n(i.INIT),a(t,r,e.test_token,s.CALLGLOBALHANDLER)}function a(e,t,n,o){try{e.socket=new WebSocket(t)}catch(e){return void z(f.SOCKET_INIT_FAILED)}e.socket.binaryType="arraybuffer",e.socket.onerror=o,e.socket.onclose=function(){e.triggerNextState()},e.socket.onmessage=function(t){if(0===t.data.indexOf("CHUNKSIZE")){var r=t.data.trim().split(" ");4===r.length?(N=parseInt(r[1]),I=parseInt(r[2]),w=parseInt(r[3])):(N=parseInt(r[1]),I=N),T.debug(e.id+": Chunksizes: min "+I+", max: "+w+", default: "+N)}else if(0===t.data.indexOf("RMBTv")){var s=t.data.substring(5).trim();O.client_version=s,0===s.indexOf("1.")?S=!0:0===s.indexOf("0.3")?S=!1:T.warn("unknown server version: "+s)}else"ACCEPT TOKEN QUIT\n"===t.data?e.socket.send("TOKEN "+n+"\n"):"OK\n"===t.data&&e.state===i.INIT?T.debug(e.id+": Token accepted"):"ERR\n"===t.data?(o(),T.error("got error msg")):0===t.data.indexOf("ACCEPT GETCHUNKS")&&e.triggerNextState()}}function c(e,t,n){F=e.reduce(function(e,t){return e+t}),T.debug("total: circa "+F/1e3+" KB/sec"),T.debug("total: circa "+8*F/1e6+" MBit/sec");var o=8*F/1e6,r=0;Object.keys(t).forEach(function(e){o>e&&(r=t[e])}),r=Math.min(W,r),T.debug("set number of threads to be used in upcoming speed test to: "+r);var s=F/(1e3/(O.measurementPointsTimespan/2));if(s-=s%1024,s=Math.max(I,s),s=Math.min(w,s),T.debug("calculated chunksize for upcoming speed test "+s/1024+" KB"),n){var i=Number.POSITIVE_INFINITY;Object.keys(A).forEach(function(e){Math.abs(s-e)<Math.abs(s-i)?("string"==typeof e&&(e=parseInt(e)),i=e):(delete A[e],delete B[e])}),s=i,T.debug("fallback to existing chunksize for upcoming speed test "+s/1024+" KB")}return{numThreads:r,chunkSize:s,bytesPerSecs:F}}function p(e,t){var n=e.socket.onmessage,o=g(),r=1,s=b;!function i(){!function(e,t,n,o){var r=e.socket,s=b*t,i=null,a=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},u=function(e){if("string"!=typeof e.data){var t=!1;i=null===i?new Uint8Array(e.data):a(i,new Uint8Array(e.data)),e.data.byteLength,i.length===n&&(t=!0),t&&255===i[i.length-1]?(r.onmessage=function(e){var t=e.data;o(t)},r.send("OK\n"),B[n]=i.buffer,i=null):(A.hasOwnProperty(n)||(A[n]=[]),t&&(A[n].length<O.savedChunks&&A[n].push(i.buffer),i=null))}};r.onmessage=u,T.debug(e.id+": downloading "+t+" chunks, "+s/1e3+" KB");var d="GETCHUNKS "+t+(n!==N?" "+n:"")+"\n";r.send(d)}(e,r,s,function(a){T.debug(e.id+": "+a);var u=parseInt(a.substring(5));g()-o>t?(j.push(r*s/(u/1e9)),e.socket.onmessage=n):r<8||!S?(r*=2,i()):(s=Math.min(2*s,w),i())})}()}function m(e){var t=e.socket.onmessage,n=O.numPings;_(e,function o(r){if(e.result.pings.push(r),n===O.numPings-1&&(L.durationPingMs=(e.result.pings[1].timeNs-e.result.pings[0].timeNs)/1e6*O.numPings,T.debug(e.id+": PING phase will take approx "+L.durationPingMs+" ms")),T.debug(e.id+": PING "+r.client+" ns client; "+r.server+" ns server"),--n>0)e.socket.onmessage=function(t){"ACCEPT GETCHUNKS GETTIME PUT PUTNORESULT PING QUIT\n"===t.data?_(e,o):T.error("unexpected error during ping test")};else{for(var s=[],i=0;i<e.result.pings.length;i++)s.push(e.result.pings[i].client);k.ping_client_median=Math.median(s),k.ping_client_shortest=Math.min.apply(Math,s);for(var a=[],u=0;u<e.result.pings.length;u++)a.push(e.result.pings[u].server);k.ping_server_median=Math.median(a),k.ping_server_shortest=Math.min.apply(Math,a),T.debug(e.id+": median client: "+Math.round(k.ping_client_median/1e3)/1e3+" ms; median server: "+Math.round(k.ping_server_median/1e3)/1e3+" ms"),T.debug(e.id+": shortest client: "+Math.round(k.ping_client_shortest/1e3)/1e3+" ms; shortest server: "+Math.round(k.ping_server_shortest/1e3)/1e3+" ms"),e.socket.onmessage=t}})}function _(e,t){var n=void 0,o=void 0;e.socket.onmessage=function(r){if("PONG\n"===r.data){var s=h();o=s-n,e.socket.send("OK\n")}else if(0===r.data.indexOf("TIME")){var i=new l;i.client=o,i.server=parseInt(r.data.substring(5)),i.timeNs=n,t(i)}},n=h(),e.socket.send("PING\n")}function y(e){return{client_language:"de",client_name:O.client,client_uuid:O.uuid,client_version:O.client_version,client_software_version:O.client_software_version,geoLocations:k.geoLocations,model:O.model,network_type:98,platform:O.platform,product:O.product,pings:k.pings,test_bytes_download:k.bytes_download,test_bytes_upload:k.bytes_upload,test_nsec_download:k.nsec_download,test_nsec_upload:k.nsec_upload,test_num_threads:x,num_threads_ul:K,test_ping_shortest:k.ping_server_shortest,test_speed_download:k.speed_download,test_speed_upload:k.speed_upload,test_token:e.test_token,test_uuid:e.test_uuid,time:k.beginTime,timezone:O.timezone,type:"DESKTOP",version_code:"1",speed_detail:k.speedItems,user_server_selection:O.userServerSelection,loop_uuid:window.loopFirstTestUUID}}var T=log&&log.getLogger?log.getLogger("rmbtws"):console,b=null,w=4194304,I=0,N=4096,S=!1,O=void 0,E=void 0,k=null,P=null,D=null,R=i.INIT,M=null,L={durationInitMs:2500,durationPingMs:1e4,durationUpMs:-1,durationDownMs:-1},C=new r,U=[],A={},B={},G=null,W=0,x=0,K=0,j=[],F=0;this.onError=function(e){P=e},this.onStateChange=function(e){D=e};var z=function(e){if(T.debug("error occurred during websocket test:",e),C.error=e,e!==f.NOT_SUPPORTED&&n(i.ERROR),null!==P){var t=P;P=null,t(e)}};this.startTest=function(e){void 0!==window.WebSocket?(n(i.INIT),k=new d,E.getDataCollectorInfo(),E.obtainControlServerRegistration(function(t){e||(window.loopFirstTestUUID=t.test_uuid),W=parseInt(t.test_numthreads),G=new v(W),L.durationDownMs=1e3*t.test_duration,L.durationUpMs=1e3*t.test_duration,null!==s.getTestVisualization()&&s.getTestVisualization().updateInfo(t.test_server_name,t.client_remote_ip,t.provider,t.test_uuid),function(){T.debug("got geolocation, obtaining token and websocket address");var e=function(){n(i.INIT),k.beginTime=Date.now();for(var e=0;e<W;e++){var r=new u(G);r.id=e,k.addThread(r.result),o(t,r,function(){T.info("All tests finished"),k.calculateAll(),E.submitResults(y(t),function(){n(i.END)},function(){z(f.SUBMIT_FAILED)})}),U.push(r)}};0===t.test_wait?e():(T.info("test scheduled for start in "+t.test_wait+" second(s)"),n(i.WAIT),self.setTimeout(function(){e()},1e3*t.test_wait))}()},function(){z(f.REGISTRATION_FAILED)})):z(f.NOT_SUPPORTED)},this.getIntermediateResult=function(){C.status=R;var e=h()/1e6-M;switch(C.diffTime=e/1e3,C.status){case i.WAIT:C.progress=0;break;case i.INIT:case i.INIT_DOWN:case i.INIT_UP:C.progress=e/L.durationInitMs;break;case i.PING:C.progress=e/L.durationPingMs;break;case i.DOWN:C.progress=e/L.durationDownMs;break;case i.UP:C.progress=e/L.durationUpMs;break;case i.END:C.progress=1;break;case i.ERROR:case i.ABORTED:C.progress=0}if(isNaN(C.progress)&&(C.progress=0),C.progress=Math.min(1,C.progress),null!==k){if(C.status!==i.PING&&C.status!==i.DOWN||(C.pingNano=k.ping_server_median),C.status===i.DOWN||C.status==i.INIT_UP){var t=d.calculateOverallSpeedFromMultipleThreads(k.threads,function(e){return e.down});C.downBitPerSec=t.speed,C.downBitPerSecLog=(Math.log10(C.downBitPerSec/1e6)+2)/4}if(C.status===i.UP||C.status==i.INIT_UP){var n=d.calculateOverallSpeedFromMultipleThreads(k.threads,function(e){return e.up});C.upBitPerSec=n.speed,C.upBitPerSecLog=(Math.log10(C.upBitPerSec/1e6)+2)/4}}return C},this.getState=function(){return"INIT"},function(e,t){O=e,E=t}(e,t)};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"debug",value:function(){}},{key:"error",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"log",value:function(){}}]),e}();Object.defineProperty(t,"__esModule",{value:!0});t.RMBTControlServerCommunication=function(e,t,n){var r=e,s=log&&log.getLogger?log.getLogger("rmbtws"):new o;return{obtainControlServerRegistration:function(e,o){var i={version:r.version,language:r.language,uuid:r.uuid,type:r.type,version_code:r.version_code,client:r.client,timezone:r.timezone,time:(new Date).getTime(),measurement_server_id:n?n.id:void 0};Object.assign(i,r.additionalRegistrationParameters),"undefined"!=typeof userServerSelection&&userServerSelection>0&&"undefined"!=typeof UserConf&&void 0!==UserConf.preferredServer&&"default"!==UserConf.preferredServer&&(i.prefer_server=UserConf.preferredServer,i.user_server_selection=userServerSelection),fetch(r.controlServerURL+r.controlServerRegistrationResource,{method:"POST",headers:t,body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(t){var n=new p(t);e(n)}).catch(function(){s.error("error getting testID"),o()})},getDataCollectorInfo:function(){fetch(r.controlServerURL+r.controlServerDataCollectorResource,{method:"GET",headers:t}).then(function(e){return e.json()}).then(function(e){r.product=e.agent.substring(0,Math.min(150,e.agent.length)),r.model=e.product,r.os_version=e.version}).catch(function(){s.error("error getting data collection response")})},submitResults:function(e,n,o){Object.assign(e,r.additionalSubmissionParameters);var i=JSON.stringify(e);s.debug("Submit size: "+i.length),fetch(r.controlServerURL+r.controlServerResultResource,{method:"POST",headers:t,body:i}).then(function(e){return e.json()}).then(function(){s.debug(e.test_uuid),n(!0)}).catch(function(){s.error("error submitting results"),o(!1)})}}};function r(){}Object.defineProperty(t,"__esModule",{value:!0});var s=t.TestEnvironment=function(){var e=null;return{getTestVisualization:function(){return e},init:function(t){void 0===t&&(t=new a),e=t}}}(),i={WAIT:"WAIT",INIT:"INIT",INIT_DOWN:"INIT_DOWN",PING:"PING",DOWN:"DOWN",CONNECT_UPLOAD:"CONNECT_UPLOAD",INIT_UP:"INIT_UP",UP:"UP",END:"END",ERROR:"ERROR",ABORTED:"ABORTED",LOCATE:"LOCATE",LOCABORTED:"LOCABORTED",SPEEDTEST_END:"SPEEDTEST_END",QOS_TEST_RUNNING:"QOS_TEST_RUNNING",QOS_END:"QOS_END"};r.prototype.setLogValues=function(){var e=function(e){return e<1e4?0:(2+Math.log(e/1e6/Math.LN10))/4};this.downBitPerSecLog=e(downBitPerSec),this.upBitPerSecLog=e(upBitPerSec)},r.prototype.pingNano=-1,r.prototype.downBitPerSec=-1,r.prototype.upBitPerSec=-1,r.prototype.status=i.INIT,r.prototype.progress=0,r.prototype.downBitPerSecLog=-1,r.prototype.upBitPerSecLog=-1,r.prototype.remainingWait=-1;var a=function(){function e(e,t){this.successCallback=e,this.errorCallback=t}return e.prototype.setRMBTTest=function(e){},e.prototype.updateInfo=function(e,t,n,o){},e.prototype.setStatus=function(e){if("ERROR"===e||"ABORTED"===e){if(this.errorCallback){var t=this.errorCallback;this.errorCallback=null,t()}}else if("END"===e&&null!==_successCallback){t=this.successCallback;this.successCallback=null,t()}},e.prototype.startTest=function(){},e}();function u(e){var t=log&&log.getLogger?log.getLogger("rmbtws"):new o,n={},r=e;return{setState:function(e){this.state=e,t.debug(this.id+": reached state: "+e);var o=this;r.await(function(){t.debug(o.id+": all threads reached state: "+e),void 0!==n[e]&&null!==n[e]?(0,n[e])():t.info(o.id+": no callback registered for state: "+e)})},onStateEnter:function(e,t){n[e]=t},retriggerState:function(){setState(this.state)},triggerNextState:function(){var e=[i.INIT,i.INIT_DOWN,i.PING,i.DOWN,i.CONNECT_UPLOAD,i.INIT_UP,i.UP,i.END];if(this.state!==i.END){var n=e[e.indexOf(this.state)+1];t.debug(this.id+": triggered state "+n),this.setState(n)}},id:-1,socket:null,result:new c}}function d(){this.pings=[],this.speedItems=[],this.threads=[]}function c(){this.down=[],this.up=[],this.pings=[]}function l(){}Object.defineProperty(t,"__esModule",{value:!0}),t.RMBTTestResult=d;t.RMBTTestConfig=function(){function e(e,t,n){this.language=e,this.controlServerURL=t+"/"+n}return e.prototype.version="0.3",e.prototype.language,e.prototype.uuid="",e.prototype.type="DESKTOP",e.prototype.version_code="0.3",e.prototype.client_version="0.3",e.prototype.client_software_version="0.9.0",e.prototype.os_version=1,e.prototype.platform="RMBTws",e.prototype.model="Websocket",e.prototype.product="Chrome",e.prototype.client="RMBTws",e.prototype.timezone="Europe/Vienna",e.prototype.controlServerURL,e.prototype.controlServerRegistrationResource="adminTestRequest",e.prototype.controlServerResultResource="measurementResult",e.prototype.controlServerDataCollectorResource="requestDataCollector",e.prototype.pretestDurationMs=2e3,e.prototype.savedChunks=4,e.prototype.measurementPointsTimespan=40,e.prototype.numPings=10,e.prototype.downloadThreadsLimitsMbit={0:1,1:3,100:10},e.prototype.uploadThreadsLimitsMbit={0:1,30:2,80:3,150:10},e.prototype.userServerSelection=void 0!==window.userServerSelection?userServerSelection:0,e.prototype.additionalRegistrationParameters={},e.prototype.additionalSubmissionParameters={},e}();var p=function(){function e(e){Object.assign(this,e),this.test_duration=parseInt(e.test_duration)}return e.prototype.client_remote_ip,e.prototype.provider,e.prototype.test_server_encryption="",e.prototype.test_numthreads,e.prototype.test_server_name,e.prototype.test_uuid,e.prototype.test_id,e.prototype.test_token,e.prototype.test_server_address,e.prototype.test_duration,e.prototype.result_url,e.prototype.test_wait,e.prototype.test_server_port,e}();d.prototype.addThread=function(e){this.threads.push(e)},d.prototype.ip_local=null,d.prototype.ip_server=null,d.prototype.port_remote=null,d.prototype.num_threads=null,d.prototype.encryption="NONE",d.prototype.ping_shortest=-1,d.prototype.ping_median=-1,d.prototype.client_version=null,d.prototype.pings=[],d.prototype.speed_download=-1,d.prototype.speed_upload=-1,d.prototype.speedItems=[],d.prototype.bytes_download=-1,d.prototype.nsec_download=-1,d.prototype.bytes_upload=-1,d.prototype.nsec_upload=-1,d.prototype.totalDownBytes=-1,d.prototype.totalUpBytes=-1,d.prototype.beginTime=-1,d.prototype.geoLocations=[],d.calculateOverallSpeedFromMultipleThreads=function(e,t){for(var n=e.length,o=1/0,r=0;r<n;r++){var s=t(e[r]);s.length>0&&s[s.length-1].duration<o&&(o=s[s.length-1].duration)}for(var i=0,a=0;a<n;a++){var u=e[a],d=t(u),c=d.length;if(null!==u&&c>0){for(var l=c,p=0;p<c;p++)if(d[p].duration>=o){l=p;break}var f=void 0;if(d[l].duration===o)f=d[c-1].bytes;else{var g=0===l?0:d[l-1].bytes,h=d[l].bytes-g,v=0===l?0:d[l-1].duration,m=(o-v)/(d[l].duration-v),_=Math.round(h*m);_<0&&(_=0),f=g+_}i+=f}}return{bytes:i,nsec:o,speed:8*i/(o/1e9)}},d.prototype.calculateAll=function(){for(var e=0;e<this.threads.length;e++){var t=this.threads[e].down;if(t.length>0)for(var n=0;n<t.length;n++)this.speedItems.push({direction:"download",thread:e,time:t[n].duration,bytes:t[n].bytes})}var o=d.calculateOverallSpeedFromMultipleThreads(this.threads,function(e){return e.down});this.speed_download=o.speed/1e3,this.bytes_download=o.bytes,this.nsec_download=o.nsec;for(var r=0;r<this.threads.length;r++){var s=this.threads[r].up;if(s.length>0)for(var i=0;i<s.length;i++)this.speedItems.push({direction:"upload",thread:r,time:s[i].duration,bytes:s[i].bytes})}o=d.calculateOverallSpeedFromMultipleThreads(this.threads,function(e){return e.up}),this.speed_upload=o.speed/1e3,this.bytes_upload=o.bytes,this.nsec_upload=o.nsec;for(var a=this.threads[0].pings,u=0;u<a.length;u++)this.pings.push({value:a[u].client,value_server:a[u].server,time_ns:a[u].timeNs})},c.prototype.down=null,c.prototype.up=null,c.prototype.pings=null,c.prototype.totalDownBytes=-1,c.prototype.totalUpBytes=-1,l.prototype.client=-1,l.prototype.server=-1,l.prototype.timeNs=-1;var f=t.RMBTError={NOT_SUPPORTED:"WebSockets are not supported",SOCKET_INIT_FAILED:"WebSocket initialization failed",CONNECT_FAILED:"connection to test server failed",SUBMIT_FAILED:"Error during submission of test results",REGISTRATION_FAILED:"Error during test registration",ABNORMALLY_CLOSED:"Connection closed abnormally"};function g(){return window.performance.now()}function h(){return Math.round(1e6*window.performance.now())}function v(e){var t=e,n=[];return{await:function(e){n.push(e),n.length===t&&function(){var e=n.slice();n=[],self.setTimeout(function(){for(var n=0;n<t;n++)e[n]()},1)}()}}}!function(){if(Date.now||(Date.now=function(){return(new Date).getTime()}),void 0===window.performance&&(window.performance={}),!window.performance.now||void 0===window.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}}(),Math.median=function(e){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},Math.log10=Math.log10||function(e){return Math.log(e)/Math.LN10},self.log=self.log||{debug:function(){var e=void 0;(e=new o).log.apply(e,arguments)},trace:function(){(new o).trace()},info:function(){var e=void 0;(e=new o).info.apply(e,arguments)},warn:function(){var e=void 0;(e=new o).warn.apply(e,arguments)},error:function(){var e=void 0;(e=new o).error.apply(e,arguments)},setLevel:function(){},getLogger:function(){return log}},"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n}),void 0===document.hidden&&(document.hidden=!1)}}]);
//# sourceMappingURL=259.d406f2a6.chunk.js.map